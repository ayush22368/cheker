<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Solana â€“ Universal Wallet Connect</title>
  <style>
    body {font-family:Arial,Helvetica,sans-serif;background:#111;color:#eee;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;margin:0;}
    button {padding:12px 24px;font-size:16px;border:none;border-radius:6px;background:#9945ff;color:#fff;cursor:pointer}
    button:disabled {background:#555;cursor:not-allowed}
    #address {margin-top:12px;font-family:monospace;font-size:14px;color:#0f0}
  </style>
</head>
<body>
  <button id="connectBtn">Connect Wallet</button>
  <div id="address"></div>

  <!-- Wallet-Adapter ES modules -->
  <script type="module">
    import { WalletAdapterNetwork } from 'https://unpkg.com/@solana/wallet-adapter-base@0.9.23/lib/esm/index.js';
    import { PhantomWalletAdapter }   from 'https://unpkg.com/@solana/wallet-adapter-wallets@0.19.16/lib/esm/adapters/phantom.js';
    import { SolflareWalletAdapter }  from 'https://unpkg.com/@solana/wallet-adapter-wallets@0.19.16/lib/esm/adapters/solflare.js';
    import { GlowWalletAdapter }      from 'https://unpkg.com/@solana/wallet-adapter-wallets@0.19.16/lib/esm/adapters/glow.js';
    import { WalletModalProvider, WalletMultiButton } from 'https://unpkg.com/@solana/wallet-adapter-react-ui@0.9.35/lib/esm/index.js';
    import { ConnectionProvider, WalletProvider }     from 'https://unpkg.com/@solana/wallet-adapter-react@0.15.32/lib/esm/index.js';
    import { clusterApiUrl, PublicKey } from 'https://unpkg.com/@solana/web3.js@1.87.6/lib/index.browser.esm.js';
    import React, { useEffect, useState } from 'https://unpkg.com/react@18/umd/react.development.js';
    import ReactDOM from 'https://unpkg.com/react-dom@18/umd/react-dom.development.js';

    /* --- React glue for wallet-adapter (minimal) ------------------------- */
    const network = WalletAdapterNetwork.Devnet;
    const endpoint = clusterApiUrl(network);

    const wallets = [
      new PhantomWalletAdapter(),
      new SolflareWalletAdapter(),
      new GlowWalletAdapter(),
    ];

    function App() {
      const [pubkey, setPubkey] = useState(null);

      useEffect(() => {
        // Auto-detect adapter change
        const onChange = () => {
          const adapter = window.solana?.wallet?.adapter;
          setPubkey(adapter?.publicKey?.toString() || null);
        };
        window.addEventListener('wallet-standard:app-ready', onChange);
        return () => window.removeEventListener('wallet-standard:app-ready', onChange);
      }, []);

      return React.createElement(
        ConnectionProvider,
        { endpoint },
        React.createElement(
          WalletProvider,
          { wallets, autoConnect: true },
          React.createElement(
            WalletModalProvider,
            null,
            React.createElement(
              'div',
              null,
              React.createElement(WalletMultiButton),
              pubkey && React.createElement('div', { id: 'address' }, `Connected: ${pubkey}`)
            )
          )
        )
      );
    }

    // Render React tree into body
    const root = ReactDOM.createRoot(document.body);
    root.render(React.createElement(App));
  </script>
</body>
</html>
